# xmppmini
这是一个针对 xmpp 协议进行裁剪,以使 xmpp 协议真正实用化的项目

经过多年的 xmpp 协议相关的开发,我们发觉 xmpp 协议真正的缺陷其实不是功能不足,而是太过臃肿. xmpp 协议想要象 smtp/pop3 这样成为真正的网络应用协议应该要精练化,我们项目中的 mini 就指的是"精练"这一过程.在实际的应用中,我们发现精简后的 xmpp 协议反而能在更多的领域找到自己的位置.

## 我们精简的方式主要是:
xmpp 协议尽量只负责即时通讯部分,而文件传输,甚至于视频应用这些其实都可以交给传统的 http 或者是其他协议,没必要(其实也不可能)大包大揽.这样精简后的 xmpp 协议也会让各个希望接入的客户端更容易接入.

## 我们的目标产品主要有两个:
客户端和服务器.其中客户端包括一整套各种方便大家使用的 sdk ,至少会包括各大主流开发语言,同时也会发布精练后的 xmpp 协议规范,我们直接称谓这个规范为 xmppmini 规范. 同时也会发布一个供大家方便使用的 xmppmini 规范的服务器,这个服务器同时也会兼容目前市面上的所有 xmpp 客户端.

## xmppmini 的寻址方式
越用到最后越会发现和电子邮件的 smtp/pop3 协议相似，要开发一个实用的 xmppmini 项目特别是服务器端单靠 xmpp 协议其实是无法完成的，这就是为什么所有的免费电子邮箱服务商都会有一个自己的 web 端一样。而 xmpp 协议最大的问题就在于想将一切大包大览，这肯定是不现实的，在现在即时通讯的暂时屏蔽某用户功能为例子，这在 xmpp 协议中没有，难道为了实现这一功能我要先提交给协议正式通过吗？显然行不通，所以在 xmppmini 项目中我们不可能定那么死，很多功能接口应当只给出一个 http 地址，让各服务商自行提供 web 地址，然后客户端去访问就行了（当然服务商自己的 web 端还可以提供更强大的功能，这里的意思是 xmppmini 只是稍微规范了一下入口的地址而已，服务商也不用非要实现这个规范）。这里要说明的寻址方式和后面的附加消息格式都是如此。

1.一个地址的服务器查找方式  
例如 clq@newbt.net 一个客户端 socket 如何知道去连接什么 ip 和 端口呢？  
传统上比较简单：直接使用 dns 解析出 ip 然后默认规定大家使用 5222 端口就行了，如果是 ssl/tls 安全端口则为 5223。（另外还有一些扩展的寻址方法我们就不讨论了）  

现在很多协议比如电子邮件的 smtp 协议通过在 dns 附加信息来扩展一些功能，例如 dkim 的密钥等等，但这样会产生一些问题。现在的程序开发 api 中对 dns 的支持可以说是非常的弱，无论对客户端还是服务端都是如此，所以我们使用的不是 dns 扩展，而是网络协议中发展得最为成熟的 http 即 web 的方式，而且尽量降低接口的实现难度。举个简单的例子，cdn 加速对于 dns 来说就几乎是不可能实现的（当然实际上是可以的，这里指方便性，取得的难易而言），而 http 方面现在则是有各种各样几近无数的云系统可供选择。

所以我们扩展寻址方式的第一个就很容易理解：在域名默认站点下如果有 xmppmini.txt 的话优先查找它里面注明的地址，不存在这个文件的话再按传统查找 dns 。例如：  
地址 clq@clqsoft.com ，首先访问 http://clqsoft.com/xmppmini.txt



## xmppmini 的附加消息格式


--------
加入我们! 让我们一起努力吧,让 xmpp 即时通讯也能象 email 一样成为互联网的标配!
